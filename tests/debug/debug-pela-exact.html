<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Debug EXACTO - Pela Data</title>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore-compat.js"></script>
    <style>
        body { background: #000; color: #0f0; font-family: monospace; padding: 20px; }
        pre { background: #111; padding: 15px; border: 1px solid #333; white-space: pre-wrap; }
        .error { color: #f00; }
        .warning { color: #ff0; }
        .success { color: #0f0; }
        button { background: #0f0; color: #000; padding: 10px; border: none; cursor: pointer; margin: 5px; }
    </style>
</head>
<body>
    <h1>üîç Debug EXACTO - Datos de Pela en Firebase</h1>
    <button onclick="debugPela()">Debug Pela</button>
    <button onclick="calculateOVR()">Calcular OVR</button>
    <div id="results"></div>

    <script>
        const firebaseConfig = {
            apiKey: "AIzaSyAes7EVn8hQswS8XgvDMJfN6U4IT_ZL_WY",
            authDomain: "mil-disculpis.firebaseapp.com",
            databaseURL: "https://mil-disculpis-default-rtdb.firebaseio.com",
            projectId: "mil-disculpis",
            storageBucket: "mil-disculpis.firebasestorage.app",
            messagingSenderId: "5614567933",
            appId: "1:5614567933:web:0dce7bf37b8325c0861994",
            measurementId: "G-EMLP4TKXKR"
        };
        
        firebase.initializeApp(firebaseConfig);
        const db = firebase.firestore();
        let pelaData = null;
        
        async function debugPela() {
            const resultsDiv = document.getElementById('results');
            resultsDiv.innerHTML = '<h2>Buscando Pela...</h2>';
            
            try {
                const snapshot = await db.collection('futbol_users')
                    .where('email', '==', 'poio911@hotmail.com')
                    .get();
                
                if (snapshot.empty) {
                    resultsDiv.innerHTML += '<p class="error">‚ùå Pela no encontrado</p>';
                    return;
                }
                
                snapshot.forEach(doc => {
                    pelaData = doc.data();
                    
                    resultsDiv.innerHTML += `
                        <h2 class="success">‚úÖ Pela encontrado</h2>
                        
                        <h3>üìä DATOS EXACTOS EN FIREBASE:</h3>
                        <pre>${JSON.stringify(pelaData, null, 2)}</pre>
                        
                        <h3>üéØ VALORES DE ATRIBUTOS DIRECTOS:</h3>
                        <pre>
pac: ${pelaData.pac} (tipo: ${typeof pelaData.pac})
sho: ${pelaData.sho} (tipo: ${typeof pelaData.sho})
pas: ${pelaData.pas} (tipo: ${typeof pelaData.pas})
dri: ${pelaData.dri} (tipo: ${typeof pelaData.dri})
def: ${pelaData.def} (tipo: ${typeof pelaData.def})
phy: ${pelaData.phy} (tipo: ${typeof pelaData.phy})
ovr: ${pelaData.ovr} (tipo: ${typeof pelaData.ovr})
</pre>
                        
                        <h3>üì¶ ESTRUCTURA ATTRIBUTES:</h3>
                        <pre>
¬øExiste attributes?: ${pelaData.attributes ? 'S√ç' : 'NO'}
${pelaData.attributes ? JSON.stringify(pelaData.attributes, null, 2) : 'NO EXISTE'}
</pre>
                        
                        <h3>üîç AN√ÅLISIS:</h3>
                        <pre>
¬øTiene campos directos?: ${pelaData.pac !== undefined ? 'S√ç' : 'NO'}
¬øTiene estructura attributes?: ${pelaData.attributes ? 'S√ç' : 'NO'}
¬øLos valores que ves (71,54,53,51,53,61) est√°n en los campos directos?: ${
    pelaData.pac === 71 && pelaData.sho === 54 ? 'S√ç' : 'NO'
}
</pre>
                        
                        <h3 class="warning">‚ö†Ô∏è COMPARACI√ìN CON LO QUE VES:</h3>
                        <pre>
Lo que VES en la app:
PAC: 71 | Firebase tiene: ${pelaData.pac} | ¬øCoincide? ${pelaData.pac === 71 ? '‚úÖ' : '‚ùå'}
SHO: 54 | Firebase tiene: ${pelaData.sho} | ¬øCoincide? ${pelaData.sho === 54 ? '‚úÖ' : '‚ùå'}
PAS: 53 | Firebase tiene: ${pelaData.pas} | ¬øCoincide? ${pelaData.pas === 53 ? '‚úÖ' : '‚ùå'}
DRI: 51 | Firebase tiene: ${pelaData.dri} | ¬øCoincide? ${pelaData.dri === 51 ? '‚úÖ' : '‚ùå'}
DEF: 53 | Firebase tiene: ${pelaData.def} | ¬øCoincide? ${pelaData.def === 53 ? '‚úÖ' : '‚ùå'}
PHY: 61 | Firebase tiene: ${pelaData.phy} | ¬øCoincide? ${pelaData.phy === 61 ? '‚úÖ' : '‚ùå'}
OVR: 80 | Firebase tiene: ${pelaData.ovr} | ¬øCoincide? ${pelaData.ovr === 80 ? '‚úÖ' : '‚ùå'}
</pre>
                    `;
                });
                
            } catch (error) {
                resultsDiv.innerHTML += `<p class="error">‚ùå Error: ${error.message}</p>`;
            }
        }
        
        function calculateOVR() {
            if (!pelaData) {
                alert('Primero ejecuta el debug');
                return;
            }
            
            const resultsDiv = document.getElementById('results');
            
            const fromDirect = (pelaData.pac + pelaData.sho + pelaData.pas + pelaData.dri + pelaData.def + pelaData.phy) / 6;
            
            resultsDiv.innerHTML += `
                <h3>üìä C√ÅLCULO DE OVR:</h3>
                <pre>
Desde campos directos:
(${pelaData.pac} + ${pelaData.sho} + ${pelaData.pas} + ${pelaData.dri} + ${pelaData.def} + ${pelaData.phy}) / 6 = ${fromDirect.toFixed(2)}

OVR almacenado: ${pelaData.ovr}
¬øCoinciden? ${Math.abs(pelaData.ovr - fromDirect) < 1 ? '‚úÖ' : '‚ùå'}

Si los valores que ves son 71,54,53,51,53,61:
(71 + 54 + 53 + 51 + 53 + 61) / 6 = ${((71+54+53+51+53+61)/6).toFixed(2)} ‚â† 80
</pre>
            `;
        }
        
        // Auto-run
        window.addEventListener('load', () => {
            setTimeout(debugPela, 1000);
        });
    </script>
</body>
</html>